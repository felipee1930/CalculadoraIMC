<!DOCTYPE html>
<html>
<head>
  <title>Sistema de Gerenciamento de Funcionários</title>
</head>
<style>
html{
        text-align:center ;
        font-family: sans-serif;
        background-color: grey ;
    }
</style>
<body>
  <h1>Buscar funcionario</h1>
  <form id="formulario">
    <label for="nome">Nome:</label>
    <input type="text" id="nome" ><br><br>

    <label for="idade">Idade:</label>
    <input type="number" id="idade" ><br><br>

    <label for="cargo">Cargo:</label>
    <select id="cargo" >
      <option>Qual o cargo ?</option>
      <option value="gerente">Gerente</option>
      <option value="desenvolvedor">Desenvolvedor</option>
    </select><br><br>

    <div id="departamento-container">
      <label for="departamento">Departamento:</label>
      <input type="text" id="departamento"><br><br>
    </div>

    <div id="linguagem-container">
      <label for="linguagem">Linguagem de Programação:</label>
      <input type="text" id="linguagem" ><br><br>
    </div>

    <button type="submit">Buscar</button>
  </form>

  <h2>Informações dos Funcionários</h2>
  <div id="info"></div>

  <script>
    class Funcionario {
      constructor(nome, idade, cargo) {
        this.nome = nome;
        this.idade = idade;
        this.cargo = cargo;
      }
      seApresentar() {
        return `A(o) ${this.nome} tem ${this.idade} anos de idade.`;
      }

      trabalhar() {
        return `Está realizando suas tarefas como ${this.cargo}`;
      }
    }
    class Gerente extends Funcionario {
      constructor(nome, idade, departamento) {
        super(nome, idade, 'Gerente');
        this.departamento = departamento;
      }
      gerenciar() {
        return `e está gerenciando o departamento ${this.departamento}.`;
      }
    }
    class Desenvolvedor extends Funcionario {
      constructor(nome, idade, linguagem) {
        super(nome, idade, 'Desenvolvedor');
        this.linguagem = linguagem;
      }
      programar() {
        return `e está programando em ${this.linguagem}.`;
      }
    }
    function exibirErro(mensagem) {
      const informação = document.getElementById('info')
      informação.innerHTML =`<p style="color: black;"> ${mensagem}</p>`
    }
    document.getElementById("formulario").addEventListener("submit", function (event) {
    event.preventDefault();    

      const nome = document.getElementById('nome').value;
      const idadeInput = document.getElementById("idade");
      const idade = parseInt(idadeInput.value);
      const cargo = document.getElementById('cargo').value;
      const departamento = document.getElementById('departamento').value;
      const linguagem = document.getElementById('linguagem').value;
      
      try {
        if (!nome || !idade || !cargo ){
          throw new Error('Todos os campos devem ser preenchidos.');  
        }
        if (isNaN(idade) || idade < 0) {
            throw new Error("A idade deve ser um número positivo.");
        }
        if (cargo === 'Qual o cargo ?'){
      throw new Error('Selecione o seu Cargo.');  } 
        if (cargo === 'gerente') {
        const departamento = document.getElementById('departamento').value;
        if (!departamento) {
        throw new Error('O campo "Departamento" é obrigatório para gerentes.');
    }
          funcionario = new Gerente(nome, idade, departamento);
        } else if (cargo === 'desenvolvedor') {
            const Linguagem = document.getElementById('linguagem').value;
        if (!Linguagem) {
        throw new Error('O campo "Linguagem de programação" é obrigatório para Desenvolvedores.');
    }
          funcionario = new Desenvolvedor(nome, idade, linguagem);
        }
        document.getElementById('info').textContent = funcionario.seApresentar() + ' ' + funcionario.trabalhar();
        if (funcionario instanceof Gerente) {
          document.getElementById('info').textContent += ' ' + funcionario.gerenciar();
        } else if (funcionario instanceof Desenvolvedor) {
          document.getElementById('info').textContent += ' ' + funcionario.programar();
        }
      } catch (error) {
        exibirErro(error.message);
      }
    });
document.getElementById('departamento-container').style.display = 'none';
document.getElementById('linguagem-container').style.display = 'none';
    document.getElementById('cargo').addEventListener('change', function () {
      const selectedCargo = this.value;
      const departamentoContainer = document.getElementById('departamento-container');
      const linguagemContainer = document.getElementById('linguagem-container');
      if (selectedCargo === 'gerente') {
        departamentoContainer.style.display = 'block';
        linguagemContainer.style.display = 'none';
      } else if (selectedCargo === 'desenvolvedor') {
        departamentoContainer.style.display = 'none';
        linguagemContainer.style.display = 'block';
      } else {
        departamentoContainer.style.display = 'none';
        linguagemContainer.style.display = 'none';
      }
    });
  </script>
</body>
</html>